[gd_scene load_steps=28 format=3 uid="uid://dt3drmupjo2oe"]

[ext_resource type="Script" uid="uid://d3k3pyi0allkk" path="res://src/planet/planetary_body.gd" id="1_7jktm"]
[ext_resource type="Material" uid="uid://cle16r2v5m6bx" path="res://src/planet/material_planet.tres" id="1_fc0e3"]
[ext_resource type="Shader" uid="uid://rnanh8aukfrv" path="res://src/planet/shaders/planet_shader.gdshader" id="3_xk4xt"]
[ext_resource type="PackedScene" uid="uid://cjjvxgn2axgb2" path="res://src/player/player.tscn" id="4_fc0e3"]
[ext_resource type="Script" uid="uid://bku06nnwpk2hw" path="res://src/player/camera3rd.gd" id="5_7jktm"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_7jktm"]
sky_top_color = Color(0.0156863, 0.101961, 0.176471, 1)
sky_horizon_color = Color(0.0784314, 0.0745098, 0.254902, 1)
sky_curve = 0.0337969
ground_bottom_color = Color(0.0156863, 0.101961, 0.176471, 1)
ground_horizon_color = Color(0.0784314, 0.0745098, 0.254902, 1)
ground_curve = 0.101965

[sub_resource type="Sky" id="Sky_ig7tw"]
sky_material = SubResource("ProceduralSkyMaterial_7jktm")

[sub_resource type="Environment" id="Environment_0xm2m"]
background_mode = 2
sky = SubResource("Sky_ig7tw")
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_sky_contribution = 0.2
ambient_light_energy = 1.11
tonemap_mode = 3
tonemap_exposure = 0.5
ssao_enabled = true
glow_enabled = true
volumetric_fog_density = 0.1

[sub_resource type="ZN_FastNoiseLite" id="ZN_FastNoiseLite_7jktm"]
period = 2.0001
fractal_type = 3
fractal_gain = 0.0
fractal_ping_pong_strength = 0.2

[sub_resource type="VoxelGeneratorGraph" id="VoxelGeneratorGraph_7dm0k"]
graph_data = {
"connections": [[9, 0, 4, 0], [8, 0, 9, 0], [7, 0, 8, 0], [6, 0, 9, 1], [3, 0, 6, 2], [3, 0, 7, 2], [2, 0, 6, 1], [2, 0, 7, 1], [1, 0, 6, 0], [1, 0, 7, 0]],
"nodes": {
"1": {
"gui_position": Vector2(400, -80),
"type": "InputX"
},
"2": {
"gui_position": Vector2(400, 96),
"type": "InputY"
},
"3": {
"gui_position": Vector2(400, 16),
"type": "InputZ"
},
"4": {
"auto_connect": true,
"gui_position": Vector2(1600, 16),
"type": "OutputSDF"
},
"6": {
"auto_connect": true,
"gui_position": Vector2(816, 0),
"radius": 5.0,
"type": "SdfSphere"
},
"7": {
"auto_connect": true,
"gui_position": Vector2(816, -160),
"noise": SubResource("ZN_FastNoiseLite_7jktm"),
"type": "FastNoise3D"
},
"8": {
"b": -1.5,
"gui_position": Vector2(992, -160),
"type": "Multiply"
},
"9": {
"gui_position": Vector2(1248, -128),
"type": "Add"
}
},
"version": 2
}

[sub_resource type="VoxelMesherTransvoxel" id="VoxelMesherTransvoxel_ig7tw"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_7jktm"]
bounce = 1.0

[sub_resource type="SphereShape3D" id="SphereShape3D_7dm0k"]
radius = 0.1

[sub_resource type="NoiseTexture2D" id="NoiseTexture2D_iygna"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_l80tk"]
render_priority = 0
shader = ExtResource("3_xk4xt")
shader_parameter/u_transition_mask = 0
shader_parameter/u_color_moon = Color(0, 0.8, 0.984314, 1)
shader_parameter/u_color_crater = Color(0.211765, 0.517647, 0.984314, 1)
shader_parameter/u_color_outline = Color(0.0470588, 1, 1, 1)
shader_parameter/u_outline_threshold = 0.02
shader_parameter/u_crater_noise = SubResource("NoiseTexture2D_iygna")
shader_parameter/u_noise_scale = 3.085
shader_parameter/u_crater_threshold = 0.41

[sub_resource type="SphereMesh" id="SphereMesh_ig7tw"]
radius = 0.1
height = 0.2

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xk4xt"]
emission_enabled = true
emission = Color(0, 1, 1, 1)
emission_energy_multiplier = 16.0

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_xk4xt"]
emission_shape = 1
emission_sphere_radius = 0.1
gravity = Vector3(0, 0, 0)

[sub_resource type="SphereMesh" id="SphereMesh_iygna"]
radius = 0.05
height = 0.1
radial_segments = 4
rings = 1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7jktm"]
albedo_color = Color(1, 0.890196, 0.490196, 1)
emission_enabled = true
emission = Color(0.849255, 0.904903, 0.998919, 1)
emission_energy_multiplier = 4.0
emission_on_uv2 = true
grow = true

[sub_resource type="Curve" id="Curve_fc0e3"]
_data = [Vector2(0, 0), 0.0, 0.0273778, 0, 0, Vector2(0.502916, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_7jktm"]
curve = SubResource("Curve_fc0e3")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_fc0e3"]
emission_shape = 2
emission_sphere_radius = 10.0
gravity = Vector3(0, 0, 0)
tangential_accel_min = 0.0999978
tangential_accel_max = 5.0
scale_over_velocity_max = 7.13
scale_over_velocity_curve = SubResource("CurveTexture_7jktm")

[sub_resource type="SphereMesh" id="SphereMesh_7jktm"]
radius = 0.25
height = 0.5
radial_segments = 4
rings = 1

[sub_resource type="CylinderMesh" id="CylinderMesh_vgtt4"]
top_radius = 1.0
bottom_radius = 1.0
height = 10.0

[sub_resource type="CylinderShape3D" id="CylinderShape3D_xk4xt"]
height = 10.0
radius = 1.0

[sub_resource type="SphereShape3D" id="SphereShape3D_vgtt4"]
radius = 4.02908

[node name="Level1" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_0xm2m")

[node name="Planet" type="VoxelLodTerrain" parent="."]
generator = SubResource("VoxelGeneratorGraph_7dm0k")
mesher = SubResource("VoxelMesherTransvoxel_ig7tw")
gi_mode = 1
material = ExtResource("1_fc0e3")
collision_layer = 2
collision_mask = 0
mesh_block_size = 32

[node name="TestBall" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.95616, 4.48582, -0.639224)
collision_layer = 4
collision_mask = 5
physics_material_override = SubResource("PhysicsMaterial_7jktm")
script = ExtResource("1_7jktm")

[node name="CollisionShape3D" type="CollisionShape3D" parent="TestBall"]
shape = SubResource("SphereShape3D_7dm0k")

[node name="MeshInstance3D" type="MeshInstance3D" parent="TestBall"]
material_override = SubResource("ShaderMaterial_l80tk")
mesh = SubResource("SphereMesh_ig7tw")

[node name="GPUParticles3D" type="GPUParticles3D" parent="TestBall"]
material_override = SubResource("StandardMaterial3D_xk4xt")
amount = 4
process_material = SubResource("ParticleProcessMaterial_xk4xt")
draw_pass_1 = SubResource("SphereMesh_iygna")

[node name="Player" parent="." instance=ExtResource("4_fc0e3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.60688, 6.38393, 1.96499)
collision_layer = 7
collision_mask = 3

[node name="StarsParticles" type="GPUParticles3D" parent="."]
material_override = SubResource("StandardMaterial3D_7jktm")
cast_shadow = 0
amount = 32
lifetime = 10.0
visibility_aabb = AABB(-500, -500, -500, 1000, 1000, 1000)
local_coords = true
process_material = SubResource("ParticleProcessMaterial_fc0e3")
draw_pass_1 = SubResource("SphereMesh_7jktm")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(0.297458, 0, 0.954735, 0, 1, 0, -0.954735, 0, 0.297458, 21.7697, 3.26868, 1.07489)
script = ExtResource("5_7jktm")
target = NodePath("../Player")
smoothing_speed = 0.1

[node name="PlanetGravityParticles" type="GPUParticlesAttractorSphere3D" parent="."]
radius = 7.0

[node name="PlanetColliderParticles" type="GPUParticlesCollisionSphere3D" parent="."]
radius = 4.34

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(0.802908, 0.594542, 0.0431045, -0.593687, 0.804065, -0.0318724, -0.0536083, -1.93553e-09, 0.998562, 0, 0, 0)
mesh = SubResource("CylinderMesh_vgtt4")

[node name="StaticBody3D" type="StaticBody3D" parent="MeshInstance3D"]
collision_layer = 7
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="MeshInstance3D/StaticBody3D"]
transform = Transform3D(1, -2.96986e-08, 3.72529e-09, -1.99706e-10, 1, -5.35771e-12, 0, -7.00977e-11, 1, 0, 0, 0)
shape = SubResource("CylinderShape3D_xk4xt")

[node name="PlanetCollider" type="StaticBody3D" parent="."]
collision_layer = 4
collision_mask = 0

[node name="CollisionShape3D" type="CollisionShape3D" parent="PlanetCollider"]
shape = SubResource("SphereShape3D_vgtt4")
