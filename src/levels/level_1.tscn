[gd_scene load_steps=24 format=3 uid="uid://dt3drmupjo2oe"]

[ext_resource type="Material" uid="uid://cle16r2v5m6bx" path="res://src/planet/material_planet.tres" id="1_fc0e3"]
[ext_resource type="PackedScene" uid="uid://cjjvxgn2axgb2" path="res://src/player/player.tscn" id="4_fc0e3"]
[ext_resource type="PackedScene" uid="uid://cmvwywpkoebi0" path="res://src/platform/platform.tscn" id="4_iygna"]
[ext_resource type="Script" uid="uid://bku06nnwpk2hw" path="res://src/player/camera3rd.gd" id="5_7jktm"]
[ext_resource type="PackedScene" uid="uid://cqa4ocxckglvo" path="res://src/ui/ingame/in_popup.tscn" id="5_xk4xt"]
[ext_resource type="Texture2D" uid="uid://cxss343iwb3w0" path="res://src/planet/eyes.png" id="6_iygna"]
[ext_resource type="PackedScene" uid="uid://byodlr5imq2j7" path="res://src/alien/alien.tscn" id="7_l80tk"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_7jktm"]
sky_top_color = Color(0.0156863, 0.101961, 0.176471, 1)
sky_horizon_color = Color(0.0784314, 0.0745098, 0.254902, 1)
sky_curve = 0.0337969
ground_bottom_color = Color(0.0156863, 0.101961, 0.176471, 1)
ground_horizon_color = Color(0.0784314, 0.0745098, 0.254902, 1)
ground_curve = 0.101965

[sub_resource type="Sky" id="Sky_ig7tw"]
sky_material = SubResource("ProceduralSkyMaterial_7jktm")

[sub_resource type="Environment" id="Environment_0xm2m"]
background_mode = 2
sky = SubResource("Sky_ig7tw")
ambient_light_source = 2
ambient_light_color = Color(1, 1, 1, 1)
ambient_light_sky_contribution = 0.2
tonemap_mode = 3
tonemap_exposure = 0.5
ssao_enabled = true
glow_enabled = true
glow_normalized = true
glow_bloom = 0.1
glow_blend_mode = 0
volumetric_fog_density = 0.1

[sub_resource type="ZN_FastNoiseLite" id="ZN_FastNoiseLite_7jktm"]
period = 2.0001
fractal_type = 3
fractal_gain = 0.0
fractal_ping_pong_strength = 0.2

[sub_resource type="VoxelGeneratorGraph" id="VoxelGeneratorGraph_7dm0k"]
graph_data = {
"connections": [[9, 0, 4, 0], [8, 0, 9, 0], [7, 0, 8, 0], [6, 0, 9, 1], [3, 0, 6, 2], [3, 0, 7, 2], [2, 0, 6, 1], [2, 0, 7, 1], [1, 0, 6, 0], [1, 0, 7, 0]],
"nodes": {
"1": {
"gui_position": Vector2(400, -80),
"type": "InputX"
},
"2": {
"gui_position": Vector2(400, 96),
"type": "InputY"
},
"3": {
"gui_position": Vector2(400, 16),
"type": "InputZ"
},
"4": {
"auto_connect": true,
"gui_position": Vector2(1600, 16),
"type": "OutputSDF"
},
"6": {
"auto_connect": true,
"gui_position": Vector2(816, 0),
"radius": 5.0,
"type": "SdfSphere"
},
"7": {
"auto_connect": true,
"gui_position": Vector2(816, -160),
"noise": SubResource("ZN_FastNoiseLite_7jktm"),
"type": "FastNoise3D"
},
"8": {
"b": -1.5,
"gui_position": Vector2(992, -160),
"type": "Multiply"
},
"9": {
"gui_position": Vector2(1248, -128),
"type": "Add"
}
},
"version": 2
}

[sub_resource type="VoxelMesherTransvoxel" id="VoxelMesherTransvoxel_ig7tw"]

[sub_resource type="ViewportTexture" id="ViewportTexture_xk4xt"]
viewport_path = NodePath("SubViewport")

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7jktm"]
emission_enabled = true
emission = Color(0.849255, 0.904903, 0.998919, 1)
emission_energy_multiplier = 4.0
emission_on_uv2 = true
grow = true

[sub_resource type="Curve" id="Curve_iygna"]
_data = [Vector2(0, 0), 0.0, 6.20225, 0, 0, Vector2(0.5, 1), 0.0, 0.0, 0, 0, Vector2(1, 0.0561798), -5.56613, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_l80tk"]
curve = SubResource("Curve_iygna")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_fc0e3"]
emission_shape = 2
emission_sphere_radius = 10.0
gravity = Vector3(0, 0, 0)
tangential_accel_min = 0.0999978
tangential_accel_max = 5.0
scale_curve = SubResource("CurveTexture_l80tk")

[sub_resource type="SphereMesh" id="SphereMesh_7jktm"]
radius = 0.25
height = 0.5
radial_segments = 4
rings = 1

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_iygna"]
bounce = 1.0

[sub_resource type="SphereShape3D" id="SphereShape3D_iygna"]
radius = 4.06497

[sub_resource type="ViewportTexture" id="ViewportTexture_iygna"]
viewport_path = NodePath("SubViewport")

[sub_resource type="ViewportTexture" id="ViewportTexture_l80tk"]
viewport_path = NodePath("SubViewport")

[node name="Level1" type="Node3D"]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_0xm2m")

[node name="Planet" type="VoxelLodTerrain" parent="."]
generator = SubResource("VoxelGeneratorGraph_7dm0k")
mesher = SubResource("VoxelMesherTransvoxel_ig7tw")
gi_mode = 1
material = ExtResource("1_fc0e3")
collision_layer = 2
collision_mask = 0
mesh_block_size = 32

[node name="Platform" parent="." instance=ExtResource("4_iygna")]

[node name="InPopup" parent="Platform" instance=ExtResource("5_xk4xt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.609123, 6.29826, -0.748749)
texture = SubResource("ViewportTexture_xk4xt")

[node name="Label" parent="Platform/InPopup/SubViewport/Control" index="0"]
text = "jump: [wave amp=25.0 freq=5.0 connected=1]SPACE[/wave]
move: [rainbow freq=0.5 sat=1.0 val=1.0 speed=0.5]WASD[/rainbow]"
fit_content = true

[node name="Player" parent="." instance=ExtResource("4_fc0e3")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1.60688, 6.38393, 1.96499)
collision_layer = 7
collision_mask = 3

[node name="StarsParticles" type="GPUParticles3D" parent="."]
material_override = SubResource("StandardMaterial3D_7jktm")
cast_shadow = 0
amount = 64
lifetime = 10.0
visibility_aabb = AABB(-500, -500, -500, 1000, 1000, 1000)
local_coords = true
process_material = SubResource("ParticleProcessMaterial_fc0e3")
draw_pass_1 = SubResource("SphereMesh_7jktm")

[node name="Camera3D" type="Camera3D" parent="." node_paths=PackedStringArray("target")]
transform = Transform3D(-0.901953, 0, 0.431834, 0, 1, 0, -0.431834, 0, -0.901953, 20.2922, 8.34931, -10.595)
fov = 90.0
far = 100.0
script = ExtResource("5_7jktm")
target = NodePath("../Player")
offset = Vector3(0, 4, 2)
smoothing_speed = 0.01

[node name="StaticBody3D" type="StaticBody3D" parent="."]
collision_layer = 4
collision_mask = 0
physics_material_override = SubResource("PhysicsMaterial_iygna")

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D"]
shape = SubResource("SphereShape3D_iygna")

[node name="Face" type="Decal" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.78866, -2.78239, 0.0125334)
size = Vector3(1, 1.5, 1.5)
texture_albedo = ExtResource("6_iygna")

[node name="InPopup" parent="Face" instance=ExtResource("5_xk4xt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.267156, -1.26256, 0)
texture = SubResource("ViewportTexture_iygna")

[node name="Label" parent="Face/InPopup/SubViewport/Control" index="0"]
text = "DEWDROPS!"

[node name="Alien" parent="." instance=ExtResource("7_l80tk")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.43863, 0, 0)

[node name="InPopup" parent="Alien" instance=ExtResource("5_xk4xt")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.986679, 0.8704, 0)
texture = SubResource("ViewportTexture_l80tk")

[node name="Label" parent="Alien/InPopup/SubViewport/Control" index="0"]
text = "shoot: [pulse freq=1.0 color=#c9232760 ease=-2.0]Q[/pulse]"

[editable path="Platform"]
[editable path="Platform/InPopup"]
[editable path="Face/InPopup"]
[editable path="Alien"]
[editable path="Alien/InPopup"]
